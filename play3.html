<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>
    <div id="myDiv" style="background-color: lightblue;width: 0;height: 20px;line-height: 20px;">0%</div>
    <button id="btn">run</button>

    <div id="info">info</div>
    <script>
        window.onload = function () {
            console.log('111')
            setTimeout(() => console.log('444'))
            requestAnimationFrame(function () {
                console.log('222')
            })
            requestIdleCallback(function () {
                console.log(666)
            })
            setTimeout(() => console.log('555'))

            console.log('333')

            var timer;
            btn.onclick = function () {
                myDiv.style.width = '0';
                cancelAnimationFrame(timer);
                timer = requestAnimationFrame(function fn() {
                    if (parseInt(myDiv.style.width) < 500) {
                        myDiv.style.width = parseInt(myDiv.style.width) + 5 + 'px';
                        myDiv.innerHTML = parseInt(myDiv.style.width) / 5 + '%';
                        timer = requestAnimationFrame(fn);
                    } else {
                        cancelAnimationFrame(timer);
                    }
                });
            }

            var requestId,
                info = document.getElementById('info');

            function cb(deadline) {
                console.log(deadline);
                var i,
                    html = "deadline={<br>";

                for (i in deadline) {
                    html += '    ' + i + ":" + deadline[i] + ",<br>";
                }
                html += "};";

                info.innerHTML = html;
            }

            requestId = requestIdleCallback(cb);
        }
    </script>

    <script>
        function a() {
            this.x = 'a'
            b()
        }
        function b() {
            this.x = 'b'
            c()
        }
        function c() {
            this.x = 'c'
            d()
        }

        function d() {
            this.x = 'd'
            e()
        }
        function e() {
            this.x = 'e'
            console.log(this.a, 'eee')
        }

        try {
            console()
        } catch (error) {
            console.log('error', error)
        }
        window.onerror = function(err){
            console.log('err', err)
        }


    for (var i = 1; i <= 5; i++) {
        (function(){
            setTimeout(function timer() {
                console.log(i);
            }, i * 1000)
        })();
    }

    for (var i = 1; i <= 5; i++) {
            let j = i; // 是的，闭包的块作用域! setTimeout( function timer() {
            setTimeout(function timer() {
            console.log(j);
        }, j * 1000);
    }
    </script>
    <script>
        function node() {
                var str = 'aaa'

                function change() {
                    str = 'xxx'
                }

                return { change: change }
            }

        var node1 = node()
        var node2 = node()    



        function fun(thing){
            this.a= thing
        }

        var obj = {}

        var foo = fun.bind(obj)

        
    
    </script>


</body>

</html>